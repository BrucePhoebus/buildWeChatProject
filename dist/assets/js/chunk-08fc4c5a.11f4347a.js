(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-08fc4c5a"],{"2fbb":function(e,t,a){"use strict";a.r(t);a("7f7f");var n=a("f499"),s=a.n(n),c=(a("3b2b"),a("4917"),a("b970")),r=a("2b0e"),i=a("5a4e"),o=a("a78e"),u=a.n(o),l=a("d5b0");r.default.use(c.k).use(c.f).use(c.b);var d={components:{"page-head":i.a,tencentBottom:l.a},data:function(){return{username:null,cardCode:null,data_name:null,data_id:null,errorMessage:"",isShow:!1,showType:!0}},watch:{username:function(e,t){null==e||e.match(RegExp(/\*/))||(this.data_name=e)},cardCode:function(e,t){null==e||e.match(RegExp(/\*/))||(this.data_id=e)}},methods:{hide:function(e){this.showType=e},checkInfo:function(e,t){e.length>2&&(e=e.substr(0,1)+"*"+e.substr(e.length-1,1)),t=t.substr(0,1)+"********"+t.substr(t.length-1,1),this.username=e,this.cardCode=t},successToDo:function(e,t){var a=new FormData;a.append("token",sessionStorage.getItem("token")),a.append("openId",u.a.get("openid")),a.append("fullName",e.data_name),a.append("idNumber",e.data_id),a.append("verifyResult",t),e.$post("/pubWeb/public/faceRecognition/setAuthenticationResult",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$store.state.callbackUrl?"/pubWeb/public/system/WeChatRemoteCheck"==e.$store.state.callbackUrl?e.getGrantDeep():"/pubWeb/public/weChatPublic/personInfo"==e.$store.state.callbackUrl?e.$router.push({path:"/approveStep2",query:{isSuccess:-10,cardCode:e.data_id,username:e.data_name}}):console.log(e.$store.state.callbackUrl):e.$router.push({path:"/approveStep2",query:{isSuccess:1,cardCode:e.data_id,username:e.data_name}})}).catch(function(t){console.log(t),e.$router.push({path:"/approveStep2",query:{isSuccess:0}})})},getGrantDeep:function(){var e=s()({qlr:this.data_name,zjhm:this.data_id,returnbyte:!0}),t=this.$store.state.callbackUrl,a={strJson:e};this.$post(t,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){switch(a.status){case"-1":alert("服务器出错");break;case"0":alert("没有权限下载");break;case"1":window.location.href=t+"?strJson="+encodeURIComponent(e)}}).catch(function(e){alert("服务器出错")})},WeChatFaceCheck:function(){this.$route.query.isPersonalHomeCheck&&(this.$store.commit("SET_FACE_CHECK",!0),this.$router.push({path:"/personalHome"}))},nextPage:function(){this.checkID_number()&&this.WeChatFaceCheck()},checkID_number:function(){return null==this.data_id&&(this.data_id=this.cardCode),null==this.data_name||this.data_name.length<2?(this.errorMessage="请输入正确的姓名",!1):/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(this.data_id)?(this.errorMessage="",!0):(this.errorMessage="请输入正确的身份证号码",!1)}},mounted:function(){var e=this;this.token=sessionStorage.getItem("token");var t=u.a.get("openid");t&&e.$post("/pubWeb/public/faceRecognition/getAuthenticatedUserInfo?openId="+t).then(function(t){t&&(e.data_name=t.name,e.data_id=t.id,e.checkInfo(t.name,t.id))}).catch(function(e){}),e.$route.query.isPersonalHomeCheck&&(e.data_name=e.$store.getters.getPersonCardInfo.cardName,e.data_id=e.$store.getters.getPersonCardInfo.cardCode,e.checkInfo(e.data_name,e.data_id))}},h=(a("5319"),a("0c7c")),p=Object(h.a)(d,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"step1_1"},[n("page-head",{attrs:{title:"人脸核身"}}),n("div",{staticClass:"space_between"}),n("img",{staticClass:"face_checkout",attrs:{src:a("4a39")}}),n("van-cell-group",[n("van-field",{attrs:{id:"username",label:"姓名：","input-align":"right",center:""},on:{focus:function(t){return e.hide(!1)},blur:function(t){return e.hide(!0)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{id:"ID_number",label:"身份证号：","input-align":"right",center:"",oninput:"if(value.length>18)value=value.slice(0,18)",onafterpaste:"this.value=this.value.replace(/\\D/g,'')"},on:{focus:function(t){return e.hide(!1)},blur:function(t){return e.hide(!0)}},model:{value:e.cardCode,callback:function(t){e.cardCode=t},expression:"cardCode"}})],1),n("p",{staticClass:"errorC",model:{value:e.errorMessage,callback:function(t){e.errorMessage=t},expression:"errorMessage"}},[e._v(e._s(e.errorMessage))]),n("div",{staticStyle:{height:"40px"}}),n("van-button",{staticClass:"blueButton",attrs:{size:"large"},on:{click:function(t){return e.nextPage()}}},[e._v("开启人脸识别验证")]),n("tencentBottom",{attrs:{type:e.showType}})],1)},[],!1,null,"7a48b218",null);t.default=p.exports},"44ec":function(e,t,a){},"4a39":function(e,t,a){e.exports=a.p+"assets/img/face_checkout.326b2145.png"},5319:function(e,t,a){"use strict";var n=a("e8ef");a.n(n).a},"5a4e":function(e,t,a){"use strict";var n=a("685a"),s={props:{title:{type:String,default:""}},data:function(){return{checkIOS:!1}},mounted:function(){this.checkIOS=Object(n.a)()},methods:{goBack:function(){this.$router.back()}}},c=(a("732a"),a("0c7c")),r=Object(c.a)(s,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"head-box",class:{sticky:this.checkIOS}},[t("header",{staticClass:"head-box-inner",class:{sticky:this.checkIOS}},[t("div",{staticClass:"back-btn"}),t("div",{staticClass:"title"},[this._v(this._s(this.title))])]),this.checkIOS?this._e():t("div",{staticClass:"empty-block"})])},[],!1,null,"352bd190",null);t.a=r.exports},6499:function(e,t,a){e.exports=a.p+"assets/img/face_checkout_page_bottom.66ca40c1.png"},"685a":function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return s});a("4917");var n=function(){var e=window.navigator.userAgent;return/micromessenger/i.test(e)},s=function(){return!!window.navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}},"732a":function(e,t,a){"use strict";var n=a("98d2");a.n(n).a},9757:function(e,t,a){"use strict";var n=a("44ec");a.n(n).a},"98d2":function(e,t,a){},d5b0:function(e,t,a){"use strict";var n={props:["type"],data:function(){return{}},computed:{zindex:function(){return!0===this.type?"1":"-1"}}},s=(a("9757"),a("0c7c")),c=Object(s.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticClass:"image_bottom",style:{zIndex:this.zindex},attrs:{src:a("6499")}})])},[],!1,null,"1da62f3c",null);t.a=c.exports},e8ef:function(e,t,a){}}]);